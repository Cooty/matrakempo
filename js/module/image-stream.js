define("imagestream",["jquery","utils"],function(x,q){function r(a,s){var d="",c=0,e=a.length;for(c;c<e;c++)d+='<a href="https://www.flickr.com/photos/gyongyoskempo/'+a[c].id+'/" target="_blank" class="picture-stream__item blk blk--i"><img src="https://farm'+a[c].farm+".staticflickr.com/"+a[c].server+"/"+a[c].id+"_"+a[c].secret+'_n.jpg" class="picture-stream__img blk"title="'+a[c].title+'"></a>';t.html(d);s&&window.setTimeout(function(){b.removeClass(f)},500)}function l(a){var b=!1;$.ajax({url:u+
g,method:"GET",dataType:"json"}).done(function(d){"ok"===d.stat?(b=d.photos.photo,h=d.photos.pages,r(b,a)):(console.log("======= image-stream / getPhotosFromFlicker ======"),console.log("stat: ",d.stat,"code: ",d.code,"message: ",d.message),console.log("=================================================="))}).fail(function(a,c,b){window.console&&(console.log("======= image-stream / getPhotosFromFlicker ======"),console.log("jqXHR: ",a,"status: ",c,"error: ",b),console.log("=================================================="))})}
function m(a,b){return Math.floor(Math.random()*(b-a+1))+a}function v(){var a=m(1,h);g=a===g?m(1,h):a;k.addClass(n);b.hasClass(f)||b.addClass(f);window.setTimeout(function(){l(!0);k.removeClass(n)},300)}function p(){parseInt(e.scrollTop(),10)>=w&&(b.hasClass(f)&&b.removeClass(f),e.off("scroll.openSection"))}var g=1,u="https://api.flickr.com/services/rest/?method=flickr.people.getPublicPhotos&api_key=2edaa390ab4c6d22d111ca7fcceb3a01&user_id=122560839@N03&format=json&nojsoncallback=1&per_page=5&page=",
t=$("[data-picstream-container]"),b=$("[data-picstream-section]"),k=$("[data-reload-images]"),w=parseInt(b.position().top,10)-800,f="closed",n="rotate",e=$(window),h=1;return{init:function(){l();e.on({"scroll.openSection":q.debounce(p,20)});e.on({load:p});k.on({"click.reloadPhotos":v})}}});